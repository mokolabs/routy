<!DOCTYPE html>
<html>
  <head>
    <title>BMI Javascript Route Tester</title>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js" />
    <script src="/javascripts/purl.js" type="text/javascript"></script>
    <script>
    
      $(document).ready(function(){
        $('form').submit(function() {
          var inbound = $("#inbound").val();

          // Load routes feed
          $.getJSON('/routes.json', function(data) {
            var match = '';
            
            // Look for match
            $.each(data, function(i, val) {
              if (inbound == val.route.inbound) {
                match = "Match found (bmi.com" + val.route.inbound + "----> /mobile" + val.route.outbound + ")"
              }
            });
            
            if (match != '') {
              $("#message").html(match);
            } else {
              $("#message").html("No match found");
            }

          });
      

          return false;
        });
      });

      // var url = purl();
      // var source = url.attr('source');
      // var relative = url.attr('relative');
      // var path = url.attr('path');
      // var params = url.param();
      // var segment_count = path.split(/\//).length - 1;
      // var segment = new Array();
      // var i = 1;
      // while (i <= segment_count) {
      //   segment[i] = url.segment(i);
      //   i++;
      // }
      
    </script>
    <style>
      
      body {
        font-family: Helvetica;
        margin: 30px;
      }
      
      input[type=text] {
        font-size: 24px;
        width: 600px;
        border-radius: 6px;
      }
    
      input[type=submit] {
        font-size: 24px;
      }
      
      #nav {
        color: #bbb;
        margin: 12px 0;
      }
      
      #nav a {
        color: #999;
        text-decoration: none;
      }
      
      #nav a:hover {
        text-decoration: underline;
      }
      
    </style>
  </head>
</html>
<body>
  
  <div id="nav">
    <a href="/">Route Builder</a> | 
    <a href="/tester">Route Tester</a>  
  </div>
  
  <h1>Route Tester</h1>
  
  <form>
    <input id="inbound" type="text" name="inbound" placeholder="Inbound" />
    <br />
    <input type="submit" value="Test Route" />
  </form>
  
  <p id="message"></p>
  
  <script>
  
    // if ($("#inbound").val() != '') {
    //   document.write("<p><b>source:</b>&nbsp;" + source + "</p>");  
    //   document.write("<p><b>path:</b>&nbsp;" + path + "</p>");
    //   document.write("<p><b>segments:</b>&nbsp;" + segment_count + "</p>");
    // 
    //   for(var i = 1; i < segment.length; i++) {
    //    document.write("<p>Segment " + i + ": " + segment[i]);
    //   }
    // 
    //   document.write("<p><b>params:</b>&nbsp;" + JSON.stringify(params) + "</p>");
    // }
  
      
  </script>
  
</body>







